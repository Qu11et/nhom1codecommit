project:
  name: cloudformation-template-tests
  regions:
    - us-east-1 

tests:
  vpc-test:
    template: modules/vpc.yaml
  subnet-test:
    template: modules/subnets.yaml
    parameters:
      VPCId: Fn::GetAtt vpc-test.Outputs.VPCId
  securitygroup-test:
    template: modules/security_groups.yaml
    parameters:
      VPCId: Fn::GetAtt vpc-test.Outputs.VPCId
  natgateway-test:
    template: modules/natgateways.yaml
    parameters:
      PublicSubnetId: Fn::GetAtt subnet-test.Outputs.PublicSubnetId
  routetable-test:
    template: modules/route_tables.yaml
    parameters:
      VPCId: Fn::GetAtt vpc-test.Outputs.VPCId
      PublicSubnetId: Fn::GetAtt subnet-test.Outputs.PublicSubnetId
      PrivateSubnetId: Fn::GetAtt subnet-test.Outputs.PrivateSubnetId
      NATGatewayId: Fn::GetAtt natgateway-test.Outputs.NATGatewayId
  ec2-test:
    template: modules/ec2_instances.yaml
    parameters:
      PublicSubnetId: Fn::GetAtt subnet-test.Outputs.PublicSubnetId
      PrivateSubnetId: Fn::GetAtt subnet-test.Outputs.PrivateSubnetId
      PublicInstanceSecurityGroupId: Fn::GetAtt securitygroup-test.Outputs.PublicInstanceSecurityGroupId
      PrivateInstanceSecurityGroupId: Fn::GetAtt securitygroup-test.Outputs.PrivateInstanceSecurityGroupId
